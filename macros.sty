%
% LaTeX Macros
% Austin J. Garrett
%

% Packages
\usepackage{advdate}
\usepackage{algorithm}
\usepackage{algorithmicx}
\usepackage{algpseudocode}
\usepackage{amsfonts}
\usepackage{amsmath,esint}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{array}
\usepackage{bm}
\usepackage[usenames,dvipsnames]{color} % more flexible names for syntax highlighting colors
\usepackage{dsfont}
\usepackage{enumerate}
\usepackage{extramarks}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{inconsolata} % very nice fixed-width font included with texlive-full
\usepackage{indentfirst}
\usepackage{lastpage}
\usepackage{listings}
\usepackage{macros}
\usepackage{pgfplots}
\usepackage{setspace}
\usepackage{siunitx}
\usepackage{stmaryrd}
\usepackage{subcaption}
\usepackage{tikz-qtree}
\usepackage{underscore}
\usepackage{tikz}
\usepackage{units}
\usepackage{wrapfig}
\usepackage{xcolor,colortbl}
\usepackage{xifthen}
\usetikzlibrary{automata,shapes.geometric,trees,calc,arrows.meta,positioning,decorations.pathreplacing,bending}

% listings config
\lstset{
basicstyle=\ttfamily, 
columns=fullflexible, % make sure to use fixed-width font, CM typewriter is NOT fixed width
numbers=left, 
numberstyle=\small\ttfamily\color{Gray},
stepnumber=1,              
numbersep=10pt, 
numberfirstline=true, 
numberblanklines=true, 
tabsize=4,
lineskip=-1.5pt,
extendedchars=true,
breaklines=true,        
keywordstyle=\color{Blue}\bfseries,
identifierstyle=, % using emph or index keywords
commentstyle=\sffamily\color{OliveGreen},
stringstyle=\color{Maroon},
showstringspaces=false,
showtabs=false,
upquote=false,
texcl=true % interpet comments as LaTeX
}

% julia listing syntax highlighting
\lstdefinelanguage{julia}
{
  keywordsprefix=\@,
  morekeywords={
    exit,whos,edit,load,is,isa,isequal,typeof,tuple,ntuple,uid,hash,finalizer,convert,promote,
    subtype,typemin,typemax,realmin,realmax,sizeof,eps,promote_type,method_exists,applicable,
    invoke,dlopen,dlsym,system,error,throw,assert,new,Inf,Nan,pi,im,begin,while,for,in,return,
    break,continue,macro,quote,let,if,elseif,else,try,catch,end,bitstype,ccall,do,using,module,
    import,export,importall,baremodule,immutable,local,global,const,Bool,Int,Int8,Int16,Int32,
    Int64,Uint,Uint8,Uint16,Uint32,Uint64,Float32,Float64,Complex64,Complex128,Any,Nothing,None,
    function,type,typealias,abstract
  },
  sensitive=true,
  morecomment=[l]{\#},
  morestring=[b]',
  morestring=[b]" 
}

\sisetup{separate-uncertainty = true, per-mode = fraction}

% Todo
\newcommand{\todo}[1][] {
  \color{blue}\textsc{TODO}: \color{black}
  \ifthenelse{\equal{#1}{}}{replace me}{#1}%
}

% Matrices
\newcommand{\twoxtwo}[4]{
  \begin{bmatrix}
    #1 & #2 \\
    #3 & #4
  \end{bmatrix}
}

\newcommand{\threexthree}[9]{
  \begin{bmatrix}
    #1 & #2 & #3 \\
    #4 & #5 & #6 \\
    #7 & #8 & #9
  \end{bmatrix}
}

\newcommand{\twovec}[2]{
  \begin{bmatrix}
   #1 \\
   #2
  \end{bmatrix}
}

\newcommand{\threevec}[3]{
  \begin{bmatrix}
    #1 \\
    #2 \\
    #3
  \end{bmatrix}
}

\newcommand{\fourvec}[4]{
  \begin{bmatrix}
    #1 \\
    #2 \\
    #3 \\
    #4
  \end{bmatrix}
}

\newcommand{\twovecT}[2]{
  \begin{bmatrix}
    #1 & #2
  \end{bmatrix}
}

\newcommand{\threevecT}[3]{
  \begin{bmatrix}
    #1 & #2 & #3
  \end{bmatrix}
}

\newcommand{\fourvecT}[4]{
  \begin{bmatrix}
    #1 & #2 & #3 & #4
  \end{bmatrix}
}

% Quick Remove from Math Mode
\newcommand{\E}{\mathrm{E}}
\newcommand{\Var}{\mathrm{Var}}
\newcommand{\Cov}{\mathrm{Cov}}
\newcommand{\Bias}{\mathrm{Bias}}
\newcommand{\pts}{\operatorname{pts}}
\newcommand{\adj}{\operatorname{adj}}
\newcommand{\tr}{\operatorname{tr}}

% Containers
\newcommand{\abracket}[1]{\left< #1 \right>}
\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}
\newcommand{\ceil}[1]{\left\lceil #1 \right\rceil}
\newcommand{\abs}[1]{\left| #1 \right|}
\newcommand{\bracket}[1]{\left[ #1 \right]}
\newcommand{\bra}[1]{\left< #1 \right|}
\newcommand{\dbracket}[1]{\llbracket #1 \rrbracket}
\newcommand{\inprod}[2]{\left<\left. #1\ \right| #2 \right>}
\newcommand{\ket}[1]{\left| #1 \right>}
\newcommand{\norm}[1]{\left\| #1 \right\|}
\newcommand{\paren}[1]{\left( #1 \right)}
\renewcommand{\brace}[1]{\left\{ #1 \right\}}

% Extra Commands
\newcommand{\ubar}[1]{\underaccent{\bar}{#1}}
\newcommand{\deriv}[2]{\frac{d #1}{d #2}}
\newcommand{\pderiv}[2]{\frac{\partial #1}{\partial #2}}
\newcommand{\alg}[1]{\textsc{\bfseries \footnotesize #1}}
\newcommand*\dif{\mathop{}\!\mathrm{d}}
\newcommand{\txt}[1]{\text{#1}}
\newcommand{\seq}[1]{#1_1, #1_2, \ldots, #1_n}
\newcommand{\eval}[3]{\left. #1 \right|_{#2}^{#3}}
\newcommand{\code}[1]{\texttt{#1}}
\renewcommand{\E}[2]{#1 \times 10^{#2}}
\def\dbar{{\mathchar'26\mkern-12mu d}}
\newcommand{\StatexIndent}[1][3]{%
  \setlength\@tempdima{\algorithmicindent}%
  \Statex\hskip\dimexpr#1\@tempdima\relax
}
\DeclareMathOperator*{\argmax}{argmax}

% Quick Special Characters
\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\bigO}{\mathcal{O}}
\newcommand{\grad}{\nabla}

% Algorithmic parallel block
% declaration of the new block
\algblock{ParFor}{EndParFor}
% customising the new block
\algnewcommand\algorithmicparfor{\textbf{parallel for}}
\algnewcommand\algorithmicpardo{\textbf{do}}
\algnewcommand\algorithmicendparfor{\textbf{end\ parallel\ for}}
\algrenewtext{ParFor}[1]{\algorithmicparfor\ #1\ \algorithmicpardo}
\algrenewtext{EndParFor}{\algorithmicendparfor}
% mute last statement
\algtext*{EndParFor}
